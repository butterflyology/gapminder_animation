<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Chris Hamm" />

<meta name="date" content="2019-12-12" />

<title>labels &amp; color</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>

<link rel="stylesheet" href="../misc/style.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}


.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">gganimate</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="transition_states.html">transition_states</a>
</li>
<li>
  <a href="labels.html">Labels</a>
</li>
<li>
  <a href="easing.html">Easing</a>
</li>
<li>
  <a href="transition_time.html">transition_time</a>
</li>
<li>
  <a href="transition_reveal.html">transition_reveal</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore"><code>labels</code> &amp; color</h1>
<h4 class="author">Chris Hamm</h4>
<h4 class="date">2019-12-12</h4>

</div>


<p>The animated plot is looking godecent but I think that we can increase the information content on the figure by adding labels to the plot. This is especially important when all the data points are the same color.</p>
<div id="labels" class="section level1">
<h1>Labels</h1>
<p>We can add labels!</p>
<p>Using the <code>labs()</code> function after <code>transition_states()</code> will add a label to your plot. You can use syntax from the <code>glue</code> package to define what you would like to plot. If you want to have the <code>state</code> appear on your plot, you can select from three options:</p>
<ul>
<li><strong>previous_state</strong> - previous variable state</li>
<li><strong>closest_state</strong> - the current variable state</li>
<li><strong>next_state</strong> - next variable state</li>
</ul>
<p>Since we are going to add the species name, I’ll go ahead and remove the legend since it would duplicate information in the plot.</p>
<pre class="r"><code>iris_plot &lt;- iris %&gt;% 
  ggplot(aes(x = Petal.Width, y= Petal.Length)) +
  geom_point(size = 5, alpha = 0.75, show.legend = FALSE) +
  labs(x = &quot;Petal width&quot;, y = &quot;Petal length&quot;)

iris_plot +
  transition_states(Species,
                    transition_length = 2, 
                    state_length = 1) +
  labs(title = &quot;Iris {closest_state}&quot;)</code></pre>
<p><img src="labels_files/figure-html/irisLabs-1.gif" style="display: block; margin: auto;" /></p>
<p>And now we can see the name of the Genus (<em>Iris</em>) and species name in the upper left of the animated plot. Notice that the name changes species name when the data points are halfway through the transition to the next state.</p>
</div>
<div id="colors" class="section level1">
<h1>Colors</h1>
<p>Normally, we would color distinct entities using the <code>color</code> argument inside of <code>aes()</code>. However, that generates some problems for us and makes the transition very abrupt. There is no transition among the groups, just an instantaneous change.</p>
<pre class="r"><code>iris %&gt;% 
  ggplot(aes(x = Petal.Width, y= Petal.Length)) +
  geom_point(aes(color = Species), size = 5, alpha = 0.75, show.legend = FALSE) +
  labs(x = &quot;Petal width&quot;, y = &quot;Petal length&quot;) +
  transition_states(Species,
                    transition_length = 2, 
                    state_length = 1,
                    ) +
  labs(title = &quot;Iris {closest_state}&quot;)</code></pre>
<p><img src="labels_files/figure-html/irisColors-1.gif" style="display: block; margin: auto;" /></p>
<p>To get around this, you could smooth the transition between distinct states with <code>enter_fade()</code> and <code>exit_fade()</code>.</p>
<div id="enter_-exit_" class="section level2">
<h2><code>enter_</code> &amp; <code>exit_</code></h2>
<p>A few of the fine tuning functions work for both <code>transition_states()</code> and <code>transition_time()</code>.</p>
<p>Specifically we will deal with <code>enter_</code> and <code>exit_</code>. Each can be paired with a variety of behaviors such as:</p>
<ul>
<li><code>appear</code> / <code>disappear</code> - make elements appear and disappear at the start or end of their transition.</li>
<li><code>fade</code> - set <code>alpha</code> value to make elements fade in / fade out during transitions.</li>
<li><code>grow</code> / <code>shrink</code> - set elements to make them grow into or shrink out during their transition</li>
<li><code>recolor</code> - gradually change color or fill elements from their defined color to new color</li>
<li><code>fly</code> - set <code>x</code> and <code>y</code> positions where all elements enter from / exit to</li>
<li><code>drift</code> - modify the position of an element by a specified amount</li>
</ul>
<p>Each has additional customizable parameters.</p>
<pre class="r"><code>iris %&gt;% 
  ggplot(aes(x = Petal.Width, y= Petal.Length)) +
  geom_point(aes(color = Species), size = 5, alpha = 0.75, show.legend = FALSE) +
  labs(x = &quot;Petal width&quot;, y = &quot;Petal length&quot;) +
  transition_states(Species,
                    transition_length = 2, 
                    state_length = 1,
                    ) +
  labs(title = &quot;Iris {closest_state}&quot;) +
  enter_fade() +
  exit_fade()</code></pre>
<div class="figure" style="text-align: center">
<img src="labels_files/figure-html/irisColors2-1.gif" alt="`enter_fade()` and `exit_fade()` to transition between colors"  />
<p class="caption">
<code>enter_fade()</code> and <code>exit_fade()</code> to transition between colors
</p>
</div>
</div>
<div id="group-1l" class="section level2">
<h2><code>group = 1L</code></h2>
<p>Or best yet, set them with one group with <code>1L</code>:</p>
<pre class="r"><code>iris %&gt;% 
ggplot(aes(x = Petal.Width, y = Petal.Length)) + 
  geom_point(aes(colour = Species, group = 1L), size = 5, alpha = 0.75, show.legend = FALSE) +
  labs(x = &quot;Petal width&quot;, y = &quot;Petal length&quot;) +
  transition_states(Species,
                    transition_length = 2,
                    state_length = 1) +
  labs(title = &quot;Iris {closest_state}&quot;)</code></pre>
<div class="figure" style="text-align: center">
<img src="labels_files/figure-html/irisSmoothColor-1.gif" alt="`group = 1L` to transition between colors"  />
<p class="caption">
<code>group = 1L</code> to transition between colors
</p>
</div>
</div>
</div>
<div id="boxplot" class="section level1">
<h1>Boxplot</h1>
<div id="fading" class="section level2">
<h2>Fading</h2>
<p>Using our earlier boxplot from the <code>mtcars</code> data set, let’s set the fade in and out</p>
<pre class="r"><code>car_plot +
  transition_states(gear, 
                    transition_length = 2, 
                    state_length = 1) +
  enter_fade() +
  labs(title = &quot;Gears: {closest_state}&quot;)</code></pre>
<p><img src="labels_files/figure-html/boxFade-1.gif" style="display: block; margin: auto;" /></p>
</div>
<div id="multiple-effects" class="section level2">
<h2>Multiple effects</h2>
<pre class="r"><code>car_plot + 
  theme_minimal() +
  transition_states(gear, 
                    transition_length = 2, 
                    state_length = 1) +
  labs(title = &quot;Gears: {closest_state}&quot;) +
  enter_fade() + 
  enter_grow() +
  exit_fly(x_loc = 7, y_loc = 40) + 
  exit_recolour(fill = &#39;forestgreen&#39;)</code></pre>
<p><img src="labels_files/figure-html/boxEffects-1.gif" style="display: block; margin: auto;" /></p>
</div>
</div>
<div id="geom_col" class="section level1">
<h1><code>geom_col()</code></h1>
<p>Summarize the <code>airquality</code> data and make a bar chart</p>
<pre class="r"><code>mean_temp &lt;- airquality %&gt;% 
  group_by(Month) %&gt;% 
  summarize(mTemp = mean(Temp))
mean_temp</code></pre>
<pre><code>## # A tibble: 5 x 2
##   Month mTemp
##   &lt;int&gt; &lt;dbl&gt;
## 1     5  65.5
## 2     6  79.1
## 3     7  83.9
## 4     8  84.0
## 5     9  76.9</code></pre>
<p>Create the static plot</p>
<pre class="r"><code>temp_plot &lt;- mean_temp %&gt;% 
  ggplot(
    aes(x = Month, y = mTemp, fill = mTemp)) +
  geom_col() +
  scale_fill_distiller(palette = &quot;Reds&quot;, direction = 1, name = &quot;Temp&quot;) +
  theme_minimal() +
  labs(y = &quot;Mean temperature&quot;, x = &quot;Month&quot;) +
  theme(
    panel.grid = element_blank(),
    panel.grid.major.y = element_line(color = &quot;white&quot;),
    panel.ontop = TRUE)
temp_plot</code></pre>
<p><img src="labels_files/figure-html/meanStatic-1.png" width="672" style="display: block; margin: auto;" /></p>
<pre class="r"><code>temp_plot +
  transition_states(Month, wrap = FALSE)</code></pre>
<p><img src="labels_files/figure-html/meanAnim-1.gif" style="display: block; margin: auto;" /></p>
<p>Add some effects:</p>
<pre class="r"><code>temp_plot +
  transition_states(Month, wrap = FALSE) +
  shadow_mark() +
  enter_grow() + 
  enter_fade()</code></pre>
<p><img src="labels_files/figure-html/meanEffect-1.gif" style="display: block; margin: auto;" /></p>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_').toLowerCase();
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
