---
title: "`labels`"
author: "Chris Hamm"
date: "`r Sys.Date()`"
output: 
  html_document:
    toc: TRUE
    toc_float: TRUE
    toc_depth: 3
    css: ../misc/style.css

---


```{r setup, include = FALSE}
knitr::opts_chunk$set(echo = TRUE, fig.align = "center", cache = TRUE)
options(dplyr.width = Inf)
```


```{r preliminaries, echo = TRUE}
set.seed(923741)

library("tidyverse")
library("gganimate")
```


## Load data
```{r irisData, echo = FALSE}
data(iris) # load the iris data
glimpse(iris) # view the data
```


## Static plot
Now create the static plot. Add any plot aesthetics at this point.
```{r irisStatic, echo = FALSE}
iris %>% 
  ggplot(aes(x = Petal.Width, y= Petal.Length, show.legend = FALSE)) +
  geom_point(size = 5, alpha = 0.75)
```

I like to build my plots step-by-step, so I save them as objects once I get them looking as I want. 

Adding colors will force the plot to be "choppy."

```{r irisSaved, echo = FALSE}
iris_plot <- iris %>% 
  ggplot(aes(x = Petal.Width, y= Petal.Length)) +
  geom_point(size = 5, alpha = 0.75, show.legend = FALSE) +
  labs(x = "Petal width", y = "Petal length")
```


## animated plot

With the static plot made, let's add some animation with the `transition_states()` function. The user must declare the `state` to transition among.

```{r irisTransition, echo = FALSE}
iris_anim <- iris_plot + 
  transition_states(Species)
```



These transitions look a bit slow. We have considerable power to fine-tune the speed of the transitions. 

```{r iris_fineTune, echo = FALSE}
iris_anim <-  iris_plot +
  transition_states(Species,
                    transition_length = 2, 
                    state_length = 1)
```


# Labels
We can add labels!

  - **previous_state** - previous variable state
  - **closest_state** - the current variable state
  - **next_state** - next variable state

If we are going to add the species name, I'll go ahead and remove the legend since it would duplicate information in the plot.

```{r irisLabs}
iris_plot <- iris %>% 
  ggplot(aes(x = Petal.Width, y= Petal.Length)) +
  geom_point(size = 5, alpha = 0.75, show.legend = FALSE) +
  labs(x = "Petal width", y = "Petal length")

iris_plot +
  transition_states(Species,
                    transition_length = 2, 
                    state_length = 1) +
  labs(title = "Iris {closest_state}")
